(self.webpackChunkthuc_tap_frontend_admin_nhom2=self.webpackChunkthuc_tap_frontend_admin_nhom2||[]).push([[342],{7898:function(e,n,t){"use strict";var i=t(1234),a=t(9385),r=t(3329);function l(e){return e.loading?(0,r.jsx)(a.Z,{}):e.error?(0,r.jsx)(i.Z,{showIcon:!0,message:JSON.stringify(e.error),type:"warning"}):e.fulfilled?e.children:(0,r.jsx)(r.Fragment,{children:"Something has happen"})}l.defaultValue={loading:!0,fulfilled:!1,error:null,children:(0,r.jsx)(r.Fragment,{})},n.Z=l},5522:function(e,n,t){"use strict";t.r(n);var i=t(1413),a=t(4165),r=t(5861),l=t(9439),s=t(9929),u=t(2351),o=t(3206),c=t(3090),d=t(1105),h=t(43),p=t(6553),m=t(6106),f=t(914),g=t(7412),Z=t(9862),v=t(6717),x=t(2556),j=t(2791),w=t(7898),b=t(7689),S=t(353),k=t(9085),C=t(755),y=t(3858),F=t(6710),I=t.n(F),L=t(3153),T=t(9304),A=t(4861),O=(t(1653),t(3329)),N=(c.Z.RangePicker,d.Z.TextArea);n.default=function(){var e,n,t,c,F=(0,j.useState)(!1),q=(0,l.Z)(F,2),V=q[0],_=q[1],B=(0,j.useState)(!1),R=(0,l.Z)(B,2),P=R[0],U=R[1],D=(0,j.useState)(null),X=(0,l.Z)(D,2),H=X[0],z=X[1],G=(0,j.useState)(null),J=(0,l.Z)(G,2),M=J[0],E=J[1],K=(0,j.useState)([]),Q=(0,l.Z)(K,2),W=Q[0],Y=Q[1],$=(0,j.useState)([]),ee=(0,l.Z)($,2),ne=ee[0],te=ee[1],ie=(0,j.useState)(""),ae=(0,l.Z)(ie,2),re=ae[0],le=ae[1],se=(0,j.useState)([]),ue=(0,l.Z)(se,2),oe=ue[0],ce=ue[1],de=(0,j.useState)("Th\xeam n\u1ed9i dung"),he=(0,l.Z)(de,2),pe=he[0],me=he[1],fe=(0,j.useState)(null),ge=(0,l.Z)(fe,2),Ze=ge[0],ve=ge[1],xe=(0,j.useState)([]),je=(0,l.Z)(xe,2),we=je[0],be=je[1],Se=(0,j.useState)(!1),ke=(0,l.Z)(Se,2),Ce=ke[0],ye=ke[1],Fe=(0,b.UO)().id,Ie=(0,b.s0)(),Le=(0,L.T)();(0,j.useEffect)((function(){Fe?Number(Fe)?(me("S\u1eeda n\u1ed9i dung"),_(!0),Ae(Number(Fe)),Oe()):Ie("/404"):(Oe(),U(!1),z(null))}),[Fe]);var Te=JSON.parse(null!==(e=localStorage.getItem("token"))&&void 0!==e?e:"");console.log(Te);var Ae=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(n){var t,i,r,l,s,u,o,c,d;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return U(!0),e.next=3,S.Z.getAudioBook(n);case 3:(t=e.sent).success?(ve(t.data),null!==(i=t.data)&&void 0!==i&&i.author&&(te(null===(s=t.data)||void 0===s?void 0:s.author),le(null===(u=t.data)||void 0===u||null===(o=u.author)||void 0===o||null===(c=o[0])||void 0===c?void 0:c.id)),null!==(r=t.data)&&void 0!==r&&r.image&&ce([{uid:"-1",name:"image.png",status:"done",url:t.data.image}]),null!==(l=t.data)&&void 0!==l&&l.url&&E(null===(d=t.data)||void 0===d?void 0:d.url),U(!1)):(k.Am.error(t.message,C.X),z(t.message));case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),Oe=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(){var n,t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return U(!0),e.next=3,y.Z.getListGenre({});case 3:(n=e.sent).success&&(be(null===(t=n.data)||void 0===t?void 0:t.results),U(!1));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ne=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(n){var t,i;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.Z.getListAuthor({search:n});case 2:i=e.sent,te(null===(t=i.data)||void 0===t?void 0:t.results);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),qe=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(n){var t,i,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.url){e.next=5;break}return e.next=4,new Promise((function(e){var t=new FileReader;t.readAsDataURL(n.originFileObj),t.onload=function(){return e(t.result)}}));case 4:t=e.sent;case 5:(i=new Image).src=t,null===(r=window.open(t))||void 0===r||r.document.write(i.outerHTML);case 9:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return j.useRef(null),(0,O.jsxs)(w.Z,{loading:P,error:H,fulfilled:!Fe||Boolean(Ze),children:[(0,O.jsx)("div",{className:"text-center w-full h-[40px] font-bold text-xl",children:pe}),(0,O.jsx)(h.Z,{tip:"Loading...",size:"large",spinning:Ce,children:(0,O.jsxs)(p.Z,(0,i.Z)((0,i.Z)({},{labelCol:{span:8},wrapperCol:{span:16}}),{},{onFinish:function(e){ye(!0),e.audio=W,e.image=e.image.file,delete e.selectedAuthor,delete e.inputAuthor,e.author=[re];var n=new FormData;Object.keys(e).map((function(t){"audio"!==t&&"image"!==t&&n.append(t,e[t])})),W&&n.append("audio",W),oe&&n.append("image",oe[0].originFileObj),"S\u1eeda n\u1ed9i dung"==pe?Le((0,T.vA)({id:Fe,formData:n})).unwrap().then((function(e){console.log(e),Ie("/audio-book")})).catch((function(e){ye(!1),k.Am.error(e.message,C.X)})):Le((0,T.l5)(n)).unwrap().then((function(e){console.log(e),Ie("/audio-book")})).catch((function(e){ye(!1),k.Am.error(e.message,C.X)}))},disabled:V,initialValues:(0,i.Z)((0,i.Z)({},Ze),{},{genre:null===Ze||void 0===Ze||null===(n=Ze.genre)||void 0===n?void 0:n.id,author:null===Ze||void 0===Ze||null===(t=Ze.author[0])||void 0===t?void 0:t.id,free:!(null!==Ze&&void 0!==Ze&&Ze.free)}),children:[(0,O.jsxs)(m.Z,{gutter:16,children:[(0,O.jsxs)(f.Z,{span:12,children:[(0,O.jsx)(p.Z.Item,{label:"T\xean s\xe1ch",name:"title",rules:[{required:!0,message:"Vui l\xf2ng nh\u1eadp t\xean s\xe1ch!"}],children:(0,O.jsx)(d.Z,{})}),(0,O.jsx)(p.Z.Item,{label:"Th\u1ec3 lo\u1ea1i",name:"genre",rules:[{required:!0,message:"Vui l\xf2ng ch\u1ecdn th\u1ec3 lo\u1ea1i!"}],children:(0,O.jsx)(g.Z,{children:null===we||void 0===we?void 0:we.map((function(e,n){return(0,O.jsx)(g.Z.Option,{value:null===e||void 0===e?void 0:e.id,children:null===e||void 0===e?void 0:e.name},n)}))})}),(0,O.jsx)(p.Z.Item,{label:"G\xf3i",name:"free",rules:[{required:!0,message:"Vui l\xf2ng ch\u1ecdn g\xf3i!"}],children:(0,O.jsx)(Z.Z,{checked:null!==(c=!(null!==Ze&&void 0!==Ze&&Ze.free))&&void 0!==c&&c,children:"Vip"})}),(0,O.jsxs)(m.Z,{gutter:16,style:{display:"flex",justifyContent:"space-between"},children:[(0,O.jsx)(f.Z,{span:24,children:(0,O.jsx)(p.Z.Item,{label:"T\xe1c gi\u1ea3",name:"inputAuthor",labelCol:{span:8},wrapperCol:{span:16},children:(0,O.jsx)(d.Z,{onChange:function(e){return Ne(e.target.value)},placeholder:"Nh\u1eadp t\xean t\xe1c gi\u1ea3"})})}),(0,O.jsx)(f.Z,{span:24,children:(0,O.jsx)(p.Z.Item,{label:"Ch\u1ecdn t\xe1c gi\u1ea3",name:"author",rules:[{required:!0,message:"Vui l\xf2ng nh\u1eadp t\xe1c gi\u1ea3!"}],labelCol:{span:8},wrapperCol:{span:16},children:(0,O.jsx)(g.Z,{showSearch:!0,value:re,onChange:function(e){le(e)},notFoundContent:null,children:ne.map((function(e){return(0,O.jsx)(g.Z.Option,{value:e.id,children:e.name},e.id)}))})})})]}),(0,O.jsx)(p.Z.Item,{label:"N\u0103m xu\u1ea5t b\u1ea3n",name:"publishDate",rules:[{required:!0,message:"Vui l\xf2ng nh\u1eadp n\u0103m s\u1ea3n xu\u1ea5t!"}],children:(0,O.jsx)(d.Z,{})}),(0,O.jsx)(p.Z.Item,{label:"M\xf4 t\u1ea3",name:"desc",children:(0,O.jsx)(N,{rows:4})})]}),(0,O.jsxs)(f.Z,{span:12,children:[(0,O.jsx)(p.Z.Item,{label:"\u1ea2nh b\xeca s\xe1ch",name:"image",rules:[{required:!0,message:"B\u1ea1n c\u1ea7n t\u1ea3i l\xean \u1ea3nh"}],children:(0,O.jsx)(v.Z,{action:"https://www.mocky.io/v2/5cc8019d300000980a055e76",listType:"picture-card",defaultFileList:oe,onChange:function(e){var n=e.fileList;ce(n)},onPreview:qe,children:oe.length<1&&(0,O.jsxs)("div",{children:[(0,O.jsx)(s.Z,{}),(0,O.jsx)("div",{style:{marginTop:8},children:"Upload"})]})})}),(0,O.jsx)(p.Z.Item,{label:"File \xe2m thanh",name:"audio",rules:[{required:!M,message:"B\u1ea1n c\u1ea7n t\u1ea3i l\xean \xe2m thanh!"}],children:(0,O.jsxs)("div",{className:"flex",children:[(0,O.jsx)(v.Z,{name:"audioFile",action:"https://www.mocky.io/v2/5cc8019d300000980a055e76",accept:".mp3",defaultFileList:W,showUploadList:!1,onChange:function(e){var n=URL.createObjectURL(e.file.originFileObj);E(n),Y(e.file.originFileObj)},children:(0,O.jsx)(x.ZP,{icon:(0,O.jsx)(u.Z,{}),disabled:Boolean(M),children:"T\u1ea3i l\xean file \xe2m thanh"})}),(0,O.jsx)(x.ZP,{icon:(0,O.jsx)(o.Z,{}),disabled:!Boolean(M)||V,onClick:function(e){E("")},className:"ml-[20px]",children:"X\xf3a \xe2m thanh"})]})}),M&&(0,O.jsx)("div",{className:"w-full",children:(0,O.jsx)(I(),{url:M,controls:!0,width:"100%",height:"40px",config:{file:{hlsOptions:{forceHLS:!0,debug:!1,xhrSetup:function(e,n){e.setRequestHeader("Authorization","Bearer ".concat(Te))}}}}})})]})]}),(0,O.jsx)(p.Z.Item,(0,i.Z)((0,i.Z)({},{wrapperCol:{offset:8,span:16}}),{},{children:(0,O.jsx)(x.ZP,{htmlType:"submit",onClick:function(e){var n=e.target.innerText;"S\u1eeda"==n&&(e.preventDefault(),_(!1))},disabled:!1,children:"Th\xeam n\u1ed9i dung"==pe?"L\u01b0u":V?"S\u1eeda":"C\u1eadp nh\u1eadt"})}))]}))})]})}},5893:function(){}}]);
//# sourceMappingURL=342.cab0cc93.chunk.js.map